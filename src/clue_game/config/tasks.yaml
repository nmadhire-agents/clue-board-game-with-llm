# Clue Game Tasks Configuration
# Tasks for game turns and moderator actions

# Moderator task to announce game start and state
announce_game_start_task:
  description: >
    Announce the start of the Clue game. Provide a summary of:
    1. The players participating and their character names
    2. The objective of the game (find the suspect, weapon, and room)
    3. The current game state including each player's starting location
    
    Be enthusiastic and set the mood for a mystery game!
  expected_output: >
    A dramatic and engaging announcement of the game start with player introductions
    and a reminder of the game objective.
  agent: game_moderator

# Moderator task to announce current turn
announce_turn_task:
  description: >
    Announce whose turn it is. Provide:
    1. The current player's name and character
    2. Their current location
    3. A brief summary of the game state
    4. Reminder that they should move to a room and make a suggestion
    5. IMPORTANT: You may only make a suggestion if you entered a room this turn (by movement or secret passage).
    
    Current player: {current_player}
    Turn number: {turn_number}
  expected_output: >
    Clear announcement of the current turn with relevant game state information.
  agent: game_moderator

# Player task to take their turn
player_turn_task:
  description: >
    It's your turn in the Clue game! You are {player_name}.
    
    Your objective is to solve the mystery by figuring out:
    - WHO committed the murder (which suspect)
    - WHAT weapon was used
    - WHERE it happened (which room)
    
    On your turn, you should:
    1. First, check your cards to know what's definitely NOT the solution
    2. Review your knowledge from previous suggestions
    3. Check your current location and available moves
    4. Move to a room you want to investigate
    5. Make a suggestion about the suspect and weapon (the room is your current room)
    6. Analyze the response - if someone disproves it, that card is NOT the solution
    7. If you're confident you know the solution, you may make an accusation
    
    IMPORTANT: Before making any suggestion or accusation, consult your notebook. Only suggest combinations that are not already ruled out. Never accuse unless your notebook shows exactly one possible suspect, weapon, and room. If no logical move is available, prioritize gathering new information over repeating known actions.
    
    CRITICAL NOTEBOOK STRATEGY:
    - Track ALL cards shown, not just to you, but to any player (these are announced to all agents).
    - When a suggestion is made and a player cannot disprove, mark those cards as NOT held by that player.
    - If a player disproves a suggestion, mark that player as holding the shown card, and all previous players in the disproval order as NOT holding any of the suggested cards.
    - Use the order of disprovals to eliminate possibilities for all players, not just yourself.
    - Aggressively eliminate cards from your notebook using all available deduction, including indirect clues from other agents' turns.
    - If a clue card is revealed (e.g., via magnifying glass or suggestion disproval), immediately:
      - Mark the holder as having that card
      - Mark all other players and the envelope as NOT having it
      - Eliminate it from suspicion everywhere else in your notebook
    
    CRITICAL MOVEMENT STRATEGY:
    - AVOID rooms you hold cards for! Suggesting there is WASTED since you already know it's not the solution.
    - PRIORITIZE rooms you DON'T have cards for - these give you new information.
    - Use 'Get Available Moves' to see which rooms are recommended vs which to avoid.
    - If you're in a room you have the card for, LEAVE immediately and go elsewhere.
    - Secret passages to rooms you don't have are excellent choices!
    
    GENERAL STRATEGY TIPS:
    - Cards in YOUR hand are definitely NOT the solution
    - Cards shown to you by others are NOT the solution
    - If NO ONE can disprove a suggestion, those items are likely the solution
    - Only make an accusation when you're very confident - wrong accusations eliminate you!
    
    Take your turn now. Think step by step about what you know and what to do.
  expected_output: >
    A complete turn including:
    1. Analysis of current knowledge
    2. Movement decision and execution
    3. A strategic suggestion
    4. Deduction based on the suggestion result
    5. Decision whether to accuse or wait
  agent: player_scarlet  # This will be dynamically assigned

# Moderator task to summarize a suggestion
summarize_suggestion_task:
  description: >
    A suggestion has been made. Summarize what happened:
    
    Suggester: {suggester}
    Suggestion: {suspect} with the {weapon} in the {room}
    Disproven by: {disproven_by}
    
    Announce this to all players and remind them to update their notes.
  expected_output: >
    Clear announcement of the suggestion and its outcome without revealing
    which specific card was shown (only the suggester knows that).
  agent: game_moderator

# Moderator task to announce game end
announce_game_end_task:
  description: >
    The game has ended! Announce the results:
    
    Winner: {winner}
    Solution: {suspect} with the {weapon} in the {room}
    Total turns: {total_turns}
    
    Congratulate the winner and reveal the solution to all players.
    
    IMPORTANT: After announcing the winner, generate a quality report using the
    'Get Game Quality Report' tool to evaluate all agents' performance throughout the game.
  expected_output: >
    A dramatic announcement of the game's conclusion with the solution reveal,
    congratulations to the winner, and a comprehensive quality report showing
    agent performance metrics and decision-making quality.
  agent: game_moderator

# Moderator task to validate and provide feedback on player moves
validate_player_action_task:
  description: >
    Monitor and validate a player's action for logical consistency and rule compliance.
    
    Player: {player_name}
    Action type: {action_type}
    Action details: {action_details}
    
    Use validation tools to:
    1. Check if the action follows game rules
    2. Verify it's consistent with the player's notebook knowledge
    3. Log any warnings or invalid attempts
    4. Track suggestion quality (logical vs wasted)
    
    If the action is invalid or illogical, provide constructive feedback to guide
    the player toward better decision-making in future turns.
  expected_output: >
    Validation result with either approval or constructive feedback explaining
    what went wrong and how the player can improve their decision-making.
  agent: game_moderator
